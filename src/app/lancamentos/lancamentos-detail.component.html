<div *ngIf="showLancamento">
	<!--<p>lancamento: {{lancamento|json}}</p>
	<p>lancamentoForm: {{lancamentoForm.value|json}}</p>
	<p>categorias: {{categorias|json}}</p>-->

	<form (ngSubmit)="salvarLancamento(lancamentoForm.value)" #lancamentoForm="ngForm">
		<div class="row">
			<div class="col-sm">
				<!-- Nav tabs -->
				<tabset>
					<tab heading="Lançamento">
						<div class="card">
							<div class="card-block">
								<div class="row">
									<div class="form-group col-sm-2">
										<label for="data">Data</label>
										<div class="input-group">
											<span class="input-group-addon p1" (click)="showDatePicker=(!showDatePicker)"><i class="fa fa-calendar"></i></span>
											<div *ngIf="showDatePicker" style="position:absolute; top:35px; z-index:10; min-height:290px;">
												<datepicker [(ngModel)]="dataLancamento" (selectionDone)="showDatePicker=false" [ngModelOptions]="{standalone: true}"></datepicker>
											</div>
											<input [ngModel]="dataLancamento | date:'dd/MM/yyyy'" class="form-control form-control-sm" id="data" name="data" placeholder="Data"
											 required [input-mask]="'00/00/0000'">
										</div>
									</div>

									<div class="form-group col-sm-2">
										<label for="company">Descrição</label>
										<input [ngModel]="lancamento.descricao" required type="text" class="form-control form-control-sm" id="descricao" name="descricao"
										 placeholder="Descrição" [focus]="lancamento">
									</div>

									<div class="form-group col-sm-1">
										<label for="city">Valor</label>
										<input [ngModel]="lancamento.valor" required class="form-control form-control-sm" id="valor" name="valor" [input-mask]="'000.000,00'"
										 [input-mask-options]="{reverse: true}" autocomplete="off">
									</div>

									<div class="form-group col-sm-2">
										<label for="street">Conta</label>
										<select [ngModel]="lancamento.conta" class="form-control form-control-sm" id="conta" name="conta" (ngModelChange)="contasChanged($event)">
                                            <!-- Outra forma seria passar através do $event: (change)="contasChanged($event.target.value)" -->
                                            <option [ngValue]="undefined">
												Selecione
											</option>
											<option *ngFor="let c of contas" [ngValue]="c">
                                                {{c?.nome}}
                                            </option>
                                        </select>
									</div>

									<div class="form-group col-sm-2">
										<label for="street">Catagoria</label>
										<select [ngModel]="lancamento.categoria" class="form-control form-control-sm" id="categoria" name="categoria">
                                            <option [ngValue]="undefined">
												Selecione
											</option>
											<option *ngFor="let cat of categorias" [ngValue]="cat">
                                                {{cat?.nome}}
                                            </option>
                                        </select>
									</div>

									<div class="form-group col-sm-3">
										<label class="col-sm-8 form-control-label" for="isDebito">Débito?: </label>
										<div class="col-sm-4">
											<label class="switch switch-icon switch-danger-outline-alt">
												<input type="checkbox" [ngModel]="lancamento.isDebito" id="isDebito" name="isDebito" class="switch-input">
												<span class="switch-label" data-on="" data-off=""></span>
												<span class="switch-handle"></span>
                                    		</label>
										</div>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<button [disabled]="!lancamentoForm.form.valid || !isLancamentoValido(lancamentoForm.value)" type="submit" class="btn btn-sm btn-primary"><i class="fa fa-dot-circle-o"></i> Salvar</button>
								<button [hidden]="!lancamento._id" (click)="removerLancamento()" type="button" class="btn btn-sm btn-danger"><i class="fa fa-close"></i> Remover
                                </button>
								<button (click)="voltar()" type="button" class="btn btn-sm btn-warning"><i class="fa fa-ban"></i> Voltar</button>
							</div>
						</div>
					</tab>
					<tab heading="Repetição">
						TODO...
					</tab>
					<tab heading="Notas">
						<div class="card">
							<div class="card-header">
								<i class="fa fa-edit"></i>Notas
							</div>
							<div class="card-block">
								<div class="form-group row">
									<div class="col-sm-12">
										<textarea [(ngModel)]="lancamento.notas" id="notas" name="notas" rows="4" class="form-control form-control-sm" placeholder="Conteúdo.."></textarea>
									</div>
								</div>
							</div>
						</div>
					</tab>
				</tabset>
			</div>
		</div>
	</form>
</div>
<br>
