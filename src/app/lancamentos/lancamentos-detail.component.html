<!--<p>lancamento: {{lancamento|json}}</p>
	<p>lancamentoForm: {{lancamentoForm.value|json}}</p>
	<p>categorias: {{categorias|json}}</p>-->

<form (ngSubmit)="salvarLancamento(lancamentoForm.value)" #lancamentoForm="ngForm">
	<div class="row">
		<div class="col-sm">
			<!-- Nav tabs -->
			<tabset>
				<tab heading="Lançamento">
					<div class="card">
						<div class="card-block" style="padding: 0.8rem;">
							<div class="row" style="    height: 2em;">
								<div class="form-group col-sm-2">
									<div class="input-group">
										<span style="padding: 0.1rem 0.2rem;
											font-size: 0.8rem;
											line-height: 1.5;" class="input-group-addon p1" (click)="showDatePicker=(!showDatePicker)">
											<i style="    padding-left: 0.7em;" class="fa fa-calendar"></i>
										</span>
										<div *ngIf="showDatePicker" style="position:absolute; top:35px; z-index:10; min-height:290px;">
											<datepicker [(ngModel)]="dataLancamento" (selectionDone)="showDatePicker=false" [ngModelOptions]="{standalone: true}"></datepicker>
										</div>
										<input style="padding: 0.1rem 0.2rem;
											font-size: 0.8rem;
											line-height: 1.5;" [ngModel]="dataLancamento | date:'dd/MM/yyyy'" class="form-control form-control-sm" id="data"
										 name="data" placeholder="Data" required [input-mask]="'00/00/0000'">
									</div>
								</div>

								<div class="form-group col-sm-2">

									<input style="padding: 0.1rem 0.2rem;
										font-size: 0.8rem;
										line-height: 1.5;" [ngModel]="lancamento.descricao" required type="text" class="form-control form-control-sm"
									 id="descricao" name="descricao" placeholder="Descrição" [focus]="lancamento">
								</div>

								<div class="form-group col-sm-1">

									<input style="padding: 0.1rem 0.2rem;
										font-size: 0.8rem;
										line-height: 1.5;
										text-align: right;" [ngModel]="lancamento.valor" required class="form-control form-control-sm" id="valor" name="valor"
									 [input-mask]="'###.##9,99'" [input-mask-options]="{reverse: true}" autocomplete="off" placeholder="0,00">
								</div>

								<div class="form-group col-sm-2">

									<select style="    padding: 0.1rem 0.2rem;
    font-size: 0.8rem;
    line-height: 1.5;
    height: 1.9em;" [ngModel]="lancamento.conta" class="form-control form-control-sm" id="conta" name="conta" (ngModelChange)="contasChanged($event)">
										<!-- Outra forma seria passar através do $event: (change)="contasChanged($event.target.value)" -->
										<option [ngValue]="undefined">
											Conta
										</option>
										<option *ngFor="let c of contas" [ngValue]="c">
											{{c?.nome}}
										</option>
									</select>
								</div>

								<div class="form-group col-sm-2">

									<select style="    padding: 0.1rem 0.2rem;
    font-size: 0.8rem;
    line-height: 1.5;
    height: 1.9em;" [ngModel]="lancamento.categoria" class="form-control form-control-sm" id="categoria" name="categoria">
										<option [ngValue]="undefined">
											Categoria
										</option>
										<option *ngFor="let cat of categorias" [ngValue]="cat">
											{{cat?.nome}}
										</option>
									</select>
								</div>

								<div class="form-group col-sm-2">
									<span class="col-sm-4">
										Débito?
										<label class="switch switch-icon switch-danger-outline-alt">
											<input type="checkbox" [ngModel]="lancamento.isDebito" id="isDebito" name="isDebito" class="switch-input">
											<span class="switch-label" data-on="" data-off=""></span>
											<span class="switch-handle"></span>
										</label>
									</span>
								</div>
							</div>
						</div>
						<div class="card-footer">
							<button [disabled]="!lancamentoForm.form.valid || !isLancamentoValido(lancamentoForm.value)" type="submit" class="btn btn-sm btn-primary">
								<i class="fa fa-dot-circle-o"></i> Salvar</button>
							<button [hidden]="!lancamento._id" (click)="removerLancamento()" type="button" class="btn btn-sm btn-danger">
								<i class="fa fa-close"></i> Remover
							</button>
							<button (click)="voltar()" type="button" class="btn btn-sm btn-warning">
								<i class="fa fa-ban"></i> Voltar</button>
						</div>
					</div>
				</tab>
				<tab heading="Repetição">
					TODO...
				</tab>
				<tab heading="Notas">
					<div class="card">
						<div class="card-header">
							<i class="fa fa-edit"></i>Notas
						</div>
						<div class="card-block">
							<div class="form-group row">
								<div class="col-sm-12">
									<textarea [(ngModel)]="lancamento.notas" id="notas" name="notas" rows="4" class="form-control form-control-sm" placeholder="Conteúdo.."></textarea>
								</div>
							</div>
						</div>
					</div>
				</tab>
			</tabset>
		</div>
	</div>
</form>
